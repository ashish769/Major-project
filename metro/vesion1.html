<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Metro Waste Dashboard</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <style>
    #map { height: 500px; width: 100%; }
  </style>
</head>
<body class="bg-gray-100 font-sans">

  <div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="w-64 bg-green-800 text-white p-4 space-y-6 overflow-y-auto">
      <h1 class="text-2xl font-bold mb-6">Metro Dashboard</h1>
      <nav>
        <ul class="space-y-4">
          <li class="hover:bg-green-900 p-2 rounded cursor-pointer"><i class="bi bi-map-fill mr-2"></i> Waste Status</li>
          <li class="hover:bg-green-900 p-2 rounded cursor-pointer"><i class="bi bi-truck mr-2"></i> Vehicle Details</li>
          <li class="hover:bg-green-900 p-2 rounded cursor-pointer"><i class="bi bi-graph-up mr-2"></i> Waste Graphs</li>
          <li class="hover:bg-green-900 p-2 rounded cursor-pointer"><i class="bi bi-people-fill mr-2"></i> User Recyclers</li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col">
      <!-- Header -->
      <header class="bg-white shadow p-4 flex justify-between items-center">
        <h2 class="text-xl font-semibold">Waste Management project</h2>
        <div>
          <i class="bi bi-bell-fill text-gray-600 text-lg mr-4"></i>
          <i class="bi bi-person-circle text-gray-600 text-lg"></i>
        </div>
      </header>

      <!-- Filter Buttons -->
      <div class="p-4 flex gap-4 flex-wrap bg-gray-50">
        <button onclick="filterMarkers('degradable')" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Degradable</button>
        <button onclick="filterMarkers('recyclable')" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded">Recyclable</button>
        <button onclick="filterMarkers('nonDegradable')" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded">Non-Degradable</button>
        <button onclick="filterMarkers('all')" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Show All</button>
      </div>

      <!-- Map -->
      <div id="map" class="rounded shadow-md border m-4"></div>

      <!-- Footer -->
      <footer class="mt-6 text-center text-gray-500 text-sm p-4">
        &copy; 2025 Metro Waste Management System
      </footer>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([27.7172, 85.3240], 13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    const icons = {
      degradable: L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png',
        shadowUrl: 'https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png',
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34]
      }),
      recyclable: L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-orange.png',
        shadowUrl: 'https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png',
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34]
      }),
      nonDegradable: L.icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
        shadowUrl: 'https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png',
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34]
      })
    };

    const wasteReports = [
      { lat: 27.7172, lng: 85.3240, type: 'degradable', desc: "Food Waste" },
      { lat: 27.7125, lng: 85.3232, type: 'recyclable', desc: "Plastic Bottles" },
      { lat: 27.7190, lng: 85.3270, type: 'nonDegradable', desc: "Medical Waste" },
      { lat: 27.7205, lng: 85.3295, type: 'degradable', desc: "Market Leftovers" },
      { lat: 27.7140, lng: 85.3260, type: 'recyclable', desc: "Cardboard" },
      { lat: 27.7160, lng: 85.3215, type: 'nonDegradable', desc: "Chemicals" },
      { lat: 27.7150, lng: 85.3300, type: 'recyclable', desc: "Metal" },
      { lat: 27.7188, lng: 85.3195, type: 'degradable', desc: "Compost" }
    ];

    let allMarkers = [];

    function showMarkers(typeFilter) {
      allMarkers.forEach(marker => map.removeLayer(marker));
      allMarkers = [];

      wasteReports.forEach(report => {
        if (typeFilter === 'all' || report.type === typeFilter) {
          const marker = L.marker([report.lat, report.lng], { icon: icons[report.type] })
            .addTo(map)
            .bindPopup(`<strong>${report.type.replace(/([A-Z])/g, ' $1')}</strong><br>${report.desc}`);
          allMarkers.push(marker);
        }
      });
    }

    showMarkers('all');

    function filterMarkers(type) {
      showMarkers(type);
    }
  </script>
</body>
</html>
